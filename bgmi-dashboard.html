<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BGMI Dashboard | BattleArenaHub</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:#fff;
}
.header{
    background:#020617;
    padding:16px;
    text-align:center;
    font-size:22px;
    font-weight:bold;
}
.container{
    padding:15px;
}
.card{
    background:#020617;
    border-radius:12px;
    padding:15px;
    margin-bottom:12px;
}
.label{
    font-size:13px;
    color:#9ca3af;
}
.value{
    font-size:20px;
    font-weight:bold;
    margin-top:4px;
}
.btn{
    width:100%;
    padding:14px;
    border:none;
    border-radius:10px;
    font-size:16px;
    margin-top:12px;
    cursor:pointer;
}
.inbox{
    background:#2563eb;
    color:white;
}
.logout{
    background:#dc2626;
    color:white;
}
.footer{
    text-align:center;
    font-size:12px;
    color:#9ca3af;
    margin-top:25px;
}
</style>
</head>

<body>

<div class="header">ðŸŽ® BGMI DASHBOARD</div>

<div class="container">

    <div class="card">
        <div class="label">Player Name</div>
        <div class="value" id="name">Loading...</div>
    </div>

    <div class="card">
        <div class="label">BGMI ID</div>
        <div class="value" id="gameId">---</div>
    </div>

    <div class="card">
        <div class="label">Total Coins</div>
        <div class="value" id="coins">0</div>
    </div>

    <div class="card">
        <div class="label">Weekly Coins</div>
        <div class="value" id="weeklyCoins">0</div>
    </div>

    <button class="btn inbox" onclick="openInbox()">ðŸ“¨ Open Inbox</button>
    <button class="btn logout" onclick="logout()">ðŸšª Logout</button>

    <div class="footer">
        BattleArenaHub â€¢ Secure Firebase System
    </div>

</div>

<script src="firebase-config.js"></script>

<script>
const auth = firebase.auth();
const db = firebase.firestore();

auth.onAuthStateChanged(async user=>{
    if(!user){
        location.href="index.html";
        return;
    }

    const doc = await db.collection("users").doc(user.uid).get();

    if(!doc.exists){
        location.href="profile.html";
        return;
    }

    const d = doc.data();

    if(d.game !== "BGMI"){
        location.href="dashboard.html";
        return;
    }

    document.getElementById("name").innerText = d.name || "Player";
    document.getElementById("gameId").innerText = d.gameId || "-";
    document.getElementById("coins").innerText = d.coins || 0;
    document.getElementById("weeklyCoins").innerText = d.weeklyCoins || 0;
});

function openInbox(){
    location.href="inbox.html";
}

function logout(){
    auth.signOut().then(()=>{
        location.href="index.html";
    });
}
</script>

</body>
</html>