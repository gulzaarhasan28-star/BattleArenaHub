<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Inbox</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<style>
body{margin:0;background:#0f172a;color:white;font-family:Arial}
.header{background:#020617;padding:15px;text-align:center;font-size:20px}
.msg{background:#020617;margin:12px;padding:15px;border-radius:10px}
.title{font-weight:bold;font-size:16px}
.time{font-size:12px;color:#9ca3af;margin-top:5px}
</style>
</head>
<body>

<div class="header"> Inbox</div>
<div id="list"></div>

<script src="firebase-config.js"></script>

<script>
const auth=firebase.auth();
const db=firebase.firestore();

auth.onAuthStateChanged(user=>{
 if(!user){location.href="index.html";return;}

 db.collection("admin_inbox")
 .orderBy("createdAt","desc")
 .onSnapshot(snap=>{
   list.innerHTML="";
   snap.forEach(d=>{
     const m=d.data();
     list.innerHTML+=`
      <div class="msg">
       <div class="title">${m.title}</div>
       <div>${m.message}</div>
       <div class="time">
        ${m.createdAt?.toDate().toLocaleString() || ""}
       </div>
      </div>`;
   });
 });
});
</script>
</body>
</html>