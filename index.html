<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BattleArenaHub â€“ Login</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.box{
  background:#ffffff10;
  backdrop-filter:blur(12px);
  padding:30px;
  width:100%;
  max-width:420px;
  border-radius:15px;
  text-align:center;
  color:#fff;
  box-shadow:0 20px 50px rgba(0,0,0,.4);
}
h1{margin-bottom:10px}
p{opacity:.8}
button{
  width:100%;
  padding:14px;
  font-size:16px;
  margin-top:20px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:#fff;
  color:#000;
  font-weight:bold;
}
button:disabled{opacity:.6}
.features{
  text-align:left;
  margin-top:20px;
  font-size:14px;
}
.features div{margin:6px 0}
</style>
</head>

<body>

<div class="box">
  <h1>ðŸŽ® BattleArenaHub</h1>
  <p>Professional Gaming Dashboard</p>

  <button id="loginBtn">Continue with Google</button>

  <div class="features">
    <div>âœ” Earn Coins</div>
    <div>âœ” Weekly Leaderboard</div>
    <div>âœ” AI Quiz</div>
    <div>âœ” Free Room Codes</div>
  </div>
</div>

<script type="module">
import { auth, db } from "./firebase-config.js";
import {
  GoogleAuthProvider,
  signInWithPopup,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import {
  doc,
  getDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const btn = document.getElementById("loginBtn");
const provider = new GoogleAuthProvider();

btn.onclick = async () => {
  btn.innerText="Logging in...";
  btn.disabled=true;
  try{
    await signInWithPopup(auth,provider);
  }catch(e){
    alert("Login failed");
    btn.innerText="Continue with Google";
    btn.disabled=false;
  }
};

onAuthStateChanged(auth, async user=>{
  if(!user) return;

  const snap = await getDoc(doc(db,"users",user.uid));
  if(snap.exists()){
    location.href="dashboard.html";
  }else{
    location.href="profile.html";
  }
});
</script>

</body>
</html>
