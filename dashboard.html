<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Router</title>
<style>
body{font-family:Segoe UI;background:#f3f4f6;display:flex;justify-content:center;align-items:center;height:100vh}
</style>
</head>
<body>
<h3>Checking profile...</h3>

<script src="firebase-config.js"></script>
<script>
auth.onAuthStateChanged(async user=>{
  if(!user){ location.href="index.html"; return; }

  const snap = await db.collection("users").doc(user.uid).get();
  if(!snap.exists){ location.href="profile.html"; return; }

  const d = snap.data();
  if(!d.whatsapp || !d.game || !d.gameId){
    location.href="profile.html"; return;
  }

  if(d.game==="BGMI") location.href="bgmi-dashboard.html";
  else if(d.game==="FREE_FIRE") location.href="ff-dashboard.html";
  else location.href="profile.html";
});
</script>
</body>
</html>
