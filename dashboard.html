<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
</head>
<body>

<h2>User Dashboard</h2>
<div id="data">Loading...</div>
<button onclick="logout()">Logout</button>

<script type="module">
import { auth, db } from "./firebase-config.js";
import { onAuthStateChanged, signOut } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, async user=>{
  if(!user) location.href="index.html";
  const snap=await getDoc(doc(db,"users",user.uid));
  data.innerText=JSON.stringify(snap.data(),null,2);
});

window.logout=()=>{
  signOut(auth).then(()=>location.href="index.html");
};
</script>

</body>
</html>
