<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Routing...</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>

<body style="font-family:Segoe UI;text-align:center">
<h3>Checking profile...</h3>

<script src="firebase-config.js"></script>

<script>
auth.onAuthStateChanged(async user=>{
  if(!user){
    location.href="index.html";
    return;
  }

  const snap = await db.collection("users").doc(user.uid).get();

  if(!snap.exists){
    location.href="profile.html";
    return;
  }

  const d = snap.data();

  if(!d.game || !d.gameId || !d.whatsapp){
    location.href="profile.html";
    return;
  }

  if(d.game==="BGMI") location.href="bgmi-dashboard.html";
  else if(d.game==="FREE_FIRE") location.href="ff-dashboard.html";
  else location.href="profile.html";
});
</script>
</body>
</html>